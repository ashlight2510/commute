<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ì¶œí‡´ê·¼ ë¹„ìš© & ì‹œê°„ ê³„ì‚°ê¸°</title>
    <meta
      name="description"
      content="ì¶œí‡´ê·¼ ë¹„ìš©ê³¼ ì‹œê°„ì„ ê³„ì‚°í•˜ê³ , ì‹œê°„ í™œìš©ë²•ì„ ì¶”ì²œë°›ìœ¼ì„¸ìš”."
    />

    <!-- OG -->
    <meta property="og:title" content="Commute Cost & Time Calculator" />
    <meta
      property="og:description"
      content="Calculate commute costs and time, get activity recommendations."
    />
    <meta
      property="og:image"
      content="https://dummyimage.com/1200x630/0b1220/ffffff&amp;text=Commute+Calculator"
    />

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/svg+xml"
      href='data:image/svg+xml;utf8,
    <svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 128 128">
      <defs>
        <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stop-color="%230b1220"/>
          <stop offset="1" stop-color="%231f2a44"/>
        </linearGradient>
      </defs>
      <rect width="128" height="128" rx="28" fill="url(%23g)"/>
      <g fill="%23ffffff" font-family="Arial, Helvetica, sans-serif" font-weight="700">
        <text x="50%" y="54%" font-size="44" text-anchor="middle" dominant-baseline="middle">â°</text>
      </g>
      <circle cx="96" cy="32" r="10" fill="%23ffffff" opacity="0.25"/>
    </svg>'
    />

    <style>
      :root {
        --bg: #0b1220;
        --card: #0f1a2e;
        --card2: #1a2332;
        --text: #e8eefc;
        --muted: #a9b7d6;
        --line: rgba(255, 255, 255, 0.1);
        --accent: #4a9eff;
        --accent-hover: #6bb0ff;
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
        --radius: 20px;
        --radius-sm: 14px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system,
          "Apple SD Gothic Neo", "Noto Sans KR", Segoe UI, Roboto, Helvetica,
          Arial;
        background: radial-gradient(
            1400px 600px at 50% -10%,
            rgba(74, 158, 255, 0.12),
            transparent 60%
          ),
          var(--bg);
        color: var(--text);
        min-height: 100vh;
      }
      a {
        color: inherit;
      }
      .wrap {
        max-width: 1200px;
        margin: 0 auto;
        padding: 32px 20px 64px;
      }
      header {
        text-align: center;
        margin-bottom: 32px;
      }
      .title h1 {
        font-size: 32px;
        margin: 0 0 12px;
        font-weight: 800;
        background: linear-gradient(135deg, #ffffff 0%, #a9b7d6 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .title p {
        margin: 0;
        color: var(--muted);
        font-size: 15px;
        line-height: 1.6;
      }
      .cta {
        display: flex;
        gap: 8px;
        align-items: center;
        justify-content: center;
        margin-top: 16px;
      }
      .btn {
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.05);
        color: var(--text);
        padding: 12px 16px;
        border-radius: var(--radius-sm);
        cursor: pointer;
        font-size: 13px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        transition: 0.2s all;
        user-select: none;
        white-space: nowrap;
        font-weight: 500;
      }
      .btn:hover {
        transform: translateY(-2px);
        background: rgba(255, 255, 255, 0.1);
        border-color: var(--accent);
      }
      .btn-primary {
        background: var(--accent);
        border-color: var(--accent);
        color: #ffffff;
      }
      .btn-primary:hover {
        background: var(--accent-hover);
        border-color: var(--accent-hover);
      }
      .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
      @media (max-width: 1000px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }
      .card {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.06),
          rgba(255, 255, 255, 0.02)
        );
        border: 1px solid var(--line);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 24px;
        backdrop-filter: blur(10px);
      }
      .tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
        background: rgba(0, 0, 0, 0.2);
        padding: 4px;
        border-radius: var(--radius-sm);
      }
      .tab {
        flex: 1;
        padding: 12px 16px;
        border-radius: var(--radius-sm);
        border: none;
        background: transparent;
        color: var(--muted);
        cursor: pointer;
        text-align: center;
        font-size: 14px;
        font-weight: 500;
        transition: 0.2s all;
      }
      .tab.active {
        background: rgba(255, 255, 255, 0.15);
        color: var(--text);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }
      .sectionTitle {
        font-size: 14px;
        margin: 20px 0 12px;
        color: var(--muted);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .sectionTitle:first-child {
        margin-top: 0;
      }
      .row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }
      @media (max-width: 600px) {
        .row {
          grid-template-columns: 1fr;
        }
      }
      label {
        display: block;
        font-size: 13px;
        color: var(--muted);
        margin-bottom: 8px;
        font-weight: 500;
      }
      input,
      select {
        width: 100%;
        padding: 12px 14px;
        border-radius: var(--radius-sm);
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.25);
        color: var(--text);
        outline: none;
        font-size: 14px;
        transition: 0.2s all;
      }
      input:focus,
      select:focus {
        border-color: var(--accent);
        background: rgba(0, 0, 0, 0.35);
        box-shadow: 0 0 0 3px rgba(74, 158, 255, 0.1);
      }
      input:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }
      input::placeholder {
        color: rgba(233, 238, 252, 0.3);
      }
      .help {
        font-size: 12px;
        color: rgba(169, 183, 214, 0.7);
        line-height: 1.5;
        margin-top: 6px;
      }
      .toggle-btn {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 8px 12px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.04);
        color: var(--muted);
        border-radius: var(--radius-sm);
        cursor: pointer;
        font-size: 12px;
        transition: 0.2s all;
        margin-top: 8px;
      }
      .toggle-btn:hover {
        background: rgba(255, 255, 255, 0.08);
        color: var(--text);
      }
      .toggle-btn.active {
        background: rgba(74, 158, 255, 0.15);
        border-color: var(--accent);
        color: var(--accent);
      }
      .toggle-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease, margin 0.3s ease, opacity 0.3s ease;
        opacity: 0;
        margin-top: 0;
      }
      .toggle-content.show {
        max-height: 500px;
        opacity: 1;
        margin-top: 12px;
      }
      .split {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-top: 16px;
      }
      .resultBox {
        padding: 20px;
        border-radius: var(--radius);
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.2);
      }
      .kpis {
        display: grid;
        grid-template-columns: 1fr;
        gap: 16px;
      }
      .kpi {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        padding: 16px;
        border-radius: var(--radius-sm);
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.05);
      }
      .kpi.highlight {
        background: linear-gradient(
          135deg,
          rgba(74, 158, 255, 0.15),
          rgba(74, 158, 255, 0.05)
        );
        border-color: rgba(74, 158, 255, 0.3);
      }
      .kpi .name {
        color: var(--muted);
        font-size: 13px;
        font-weight: 500;
      }
      .kpi .val {
        font-size: 24px;
        font-weight: 800;
        letter-spacing: -0.5px;
        color: var(--text);
      }
      .kpi .val.highlight {
        color: var(--accent);
      }
      .subVal {
        font-size: 12px;
        color: rgba(169, 183, 214, 0.8);
        margin-top: 6px;
        line-height: 1.5;
      }
      .copyArea {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-top: 16px;
      }
      .note {
        margin-top: 16px;
        color: rgba(169, 183, 214, 0.8);
        font-size: 12px;
        line-height: 1.6;
      }
      .hidden {
        display: none !important;
      }
      .toast {
        position: fixed;
        left: 50%;
        bottom: 24px;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.85);
        color: var(--text);
        padding: 12px 20px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.15);
        font-size: 13px;
        opacity: 0;
        pointer-events: none;
        transition: 0.3s all;
        z-index: 1000;
        backdrop-filter: blur(10px);
      }
      .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(-4px);
      }
      .recommendations {
        margin-top: 24px;
        padding: 20px;
        background: rgba(74, 158, 255, 0.08);
        border: 1px solid rgba(74, 158, 255, 0.2);
        border-radius: var(--radius);
      }
      .recommendations h3 {
        margin: 0 0 16px;
        font-size: 16px;
        color: var(--accent);
        font-weight: 700;
      }
      .recommendation-list {
        display: grid;
        gap: 12px;
      }
      .recommendation-item {
        padding: 12px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: var(--radius-sm);
        border-left: 3px solid var(--accent);
      }
      .recommendation-item .title {
        font-weight: 600;
        font-size: 13px;
        margin-bottom: 4px;
        color: var(--text);
      }
      .recommendation-item .desc {
        font-size: 12px;
        color: var(--muted);
        line-height: 1.5;
      }
      .time-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 12px;
        margin-top: 16px;
      }
      .time-stat {
        text-align: center;
        padding: 16px;
        background: rgba(255, 255, 255, 0.04);
        border-radius: var(--radius-sm);
        border: 1px solid rgba(255, 255, 255, 0.08);
      }
      .time-stat .number {
        font-size: 28px;
        font-weight: 800;
        color: var(--accent);
        margin-bottom: 4px;
      }
      .time-stat .label {
        font-size: 11px;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .emoji {
        font-size: 20px;
        margin-right: 6px;
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <header>
        <div class="title">
          <h1 data-i18n="title">â° ì¶œí‡´ê·¼ ë¹„ìš© & ì‹œê°„ ê³„ì‚°ê¸°</h1>
          <p data-i18n="subtitle">
            ì¶œí‡´ê·¼ ë¹„ìš©ê³¼ ì‹œê°„ì„ ê³„ì‚°í•˜ê³ , ì†Œì¤‘í•œ ì‹œê°„ì„ ì–´ë–»ê²Œ í™œìš©í• ì§€
            ì¶”ì²œë°›ì•„ë³´ì„¸ìš”!
          </p>
        </div>
        <div class="cta">
          <div class="lang-switch" role="tablist" aria-label="Language switcher" style="display: inline-flex; gap: 4px; padding: 2px; border-radius: 999px; background: rgba(255, 255, 255, 0.05); border: 1px solid var(--line); margin-right: 8px;">
            <button type="button" data-lang="ko" class="active" style="border: none; background: transparent; color: var(--muted); font-size: 12px; font-weight: 600; padding: 4px 10px; border-radius: 999px; cursor: pointer; transition: all 0.2s;">KR</button>
            <button type="button" data-lang="en" style="border: none; background: transparent; color: var(--muted); font-size: 12px; font-weight: 600; padding: 4px 10px; border-radius: 999px; cursor: pointer; transition: all 0.2s;">EN</button>
          </div>
          <a
            class="btn"
            href="https://funnyfunny.cloud"
            target="_blank"
            rel="noopener noreferrer"
            data-i18n="viewMore"
            >ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë³´ê¸°</a
          >
        </div>
      </header>

      <div class="grid">
        <!-- ì…ë ¥ ì¹´ë“œ -->
        <div class="card">
          <div class="tabs">
            <button class="tab active" data-mode="pt" data-i18n="tabPT">ğŸš‡ ëŒ€ì¤‘êµí†µ</button>
            <button class="tab" data-mode="car" data-i18n="tabCar">ğŸš— ìì°¨</button>
            <button class="tab" data-mode="mix" data-i18n="tabMix">ğŸ”€ í˜¼í•©</button>
          </div>

          <div class="sectionTitle" data-i18n="sectionBasic">ê¸°ë³¸ ì •ë³´</div>
          <div class="row">
            <div>
              <label data-i18n="labelDays">ì¶œê·¼ì¼ìˆ˜</label>
              <select id="daysPreset">
                <option value="22">ì£¼ 5ì¼ (ì›” 22ì¼)</option>
                <option value="18">ì£¼ 4ì¼ (ì›” 18ì¼)</option>
                <option value="14">ì£¼ 3ì¼ (ì›” 14ì¼)</option>
                <option value="custom">ì§ì ‘ ì…ë ¥</option>
              </select>
            </div>
            <div>
              <label data-i18n="labelRoundTrip">ì™•ë³µ ê¸°ì¤€</label>
              <select id="roundTrip">
                <option value="2">ì™•ë³µ</option>
                <option value="1">í¸ë„</option>
              </select>
            </div>
          </div>

          <div class="toggle-content" id="daysCustomToggle">
            <div>
              <label data-i18n="daysCustom">ì›” ì¶œê·¼ì¼ìˆ˜ ì§ì ‘ ì…ë ¥</label>
              <input
                id="daysCustom"
                type="number"
                min="0"
                step="1"
                data-i18n-placeholder="placeholderExample"
                placeholder="ì˜ˆ: 20"
              />
            </div>
          </div>
          <button class="toggle-btn" id="daysCustomBtn" style="display: none" data-i18n="daysCustomBtn">
            <span>ğŸ“</span> ì§ì ‘ ì…ë ¥í•˜ê¸°
          </button>

          <div class="sectionTitle" style="margin-top: 20px" data-i18n="sectionTime">ì¶œí‡´ê·¼ ì‹œê°„</div>
          <div class="row">
            <div>
              <label data-i18n="labelCommuteTime">í¸ë„ ì†Œìš” ì‹œê°„ (ë¶„)</label>
              <input
                id="commuteTime"
                type="number"
                min="0"
                step="1"
                data-i18n-placeholder="placeholderExample"
                placeholder="ì˜ˆ: 45"
              />
              <div class="help" data-i18n="hintCommuteTime">ì§‘ì—ì„œ íšŒì‚¬ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„</div>
            </div>
            <div>
              <label data-i18n="labelHourlyValue">ì‹œê°„ë‹¹ ê¸°íšŒë¹„ìš© (ì›)</label>
              <input
                id="hourlyValue"
                type="number"
                min="0"
                step="1000"
                data-i18n-placeholder="placeholderExample"
                placeholder="ì˜ˆ: 25000"
              />
              <div class="help" data-i18n="hintHourlyValue">ì‹œê°„ë‹¹ ê¸‰ì—¬ ë˜ëŠ” ê°€ì¹˜ë¡œ ê³„ì‚°</div>
            </div>
          </div>

          <!-- ëŒ€ì¤‘êµí†µ -->
          <div id="panel-pt" style="margin-top: 20px">
            <div class="sectionTitle" data-i18n="sectionPT">ëŒ€ì¤‘êµí†µ ì •ë³´</div>
            <div class="row">
              <div>
                <label data-i18n="labelPTOneWay">í¸ë„ êµí†µë¹„ (ì›)</label>
                <input
                  id="ptOneWay"
                  type="number"
                  min="0"
                  step="10"
                  data-i18n-placeholder="placeholderExample"
                  placeholder="ì˜ˆ: 1400"
                />
              </div>
              <div>
                <label data-i18n="labelPTPass">ì •ê¸°ê¶Œ ì‚¬ìš©</label>
                <select id="ptPass">
                  <option value="no">ë¯¸ì‚¬ìš©</option>
                  <option value="yes">ì‚¬ìš©</option>
                </select>
              </div>
            </div>

            <div class="toggle-content" id="ptPassToggle">
              <div class="row">
                <div>
                  <label data-i18n="labelPTPassMonthly">ì •ê¸°ê¶Œ ì›” ê¸ˆì•¡ (ì›)</label>
                  <input
                    id="ptPassMonthly"
                    type="number"
                    min="0"
                    step="100"
                    data-i18n-placeholder="placeholderExample"
                    placeholder="ì˜ˆ: 65000"
                  />
                  <div class="help" data-i18n="hintPTPass">
                    ì •ê¸°ê¶Œì„ ì“°ë©´ ì›” ê¸ˆì•¡ì´ ìš°ì„  ì ìš©ë©ë‹ˆë‹¤
                  </div>
                </div>
                <div>
                  <label data-i18n="labelPTExtra">ì¶”ê°€ ë¹„ìš© (ì›”)</label>
                  <input
                    id="ptExtraMonthly"
                    type="number"
                    min="0"
                    step="100"
                    data-i18n-placeholder="placeholderExample"
                    placeholder="ì˜ˆ: 0"
                  />
                  <div class="help" data-i18n="hintPTExtra">ë²„ìŠ¤ ì¶”ê°€ìš”ê¸ˆ, ì…”í‹€ ìœ ë£Œ ë“±</div>
                </div>
              </div>
            </div>
            <button class="toggle-btn" id="ptPassBtn" style="display: none" data-i18n="ptPassBtn">
              <span>ğŸ’³</span> ì •ê¸°ê¶Œ ì •ë³´ ì…ë ¥í•˜ê¸°
            </button>
          </div>

          <!-- ìì°¨ -->
          <div id="panel-car" class="hidden" style="margin-top: 20px">
            <div class="sectionTitle" data-i18n="sectionCar">ìì°¨ ì •ë³´</div>
            <div class="row">
              <div>
                <label data-i18n="labelCarOneWayKm">í¸ë„ ê±°ë¦¬ (km)</label>
                <input
                  id="carOneWayKm"
                  type="number"
                  min="0"
                  step="0.1"
                  data-i18n-placeholder="placeholderExample"
                  placeholder="ì˜ˆ: 12.5"
                />
              </div>
              <div>
                <label data-i18n="labelCarKmpl">ì—°ë¹„ (km/L)</label>
                <input
                  id="carKmpl"
                  type="number"
                  min="0"
                  step="0.1"
                  data-i18n-placeholder="placeholderExample"
                  placeholder="ì˜ˆ: 11.0"
                />
              </div>
            </div>

            <div class="row" style="margin-top: 12px">
              <div>
                <label data-i18n="labelCarFuelPrice">ìœ ê°€ (ì›/L)</label>
                <input
                  id="carFuelPrice"
                  type="number"
                  min="0"
                  step="1"
                  data-i18n-placeholder="placeholderExample"
                  placeholder="ì˜ˆ: 1700"
                />
              </div>
              <div>
                <label data-i18n="labelCarTollDaily">í†¨ê²Œì´íŠ¸ (í•˜ë£¨, ì›)</label>
                <input
                  id="carTollDaily"
                  type="number"
                  min="0"
                  step="10"
                  data-i18n-placeholder="placeholderExample"
                  placeholder="ì˜ˆ: 2000"
                />
              </div>
            </div>

            <div class="toggle-content" id="carExtraToggle">
              <div class="row" style="margin-top: 12px">
                <div>
                  <label data-i18n="labelCarParking">ì£¼ì°¨ë¹„ (ì›”, ì›)</label>
                  <input
                    id="carParkingMonthly"
                    type="number"
                    min="0"
                    step="1000"
                    data-i18n-placeholder="placeholderExample"
                    placeholder="ì˜ˆ: 80000"
                  />
                </div>
                <div>
                  <label data-i18n="labelCarExtra">ê¸°íƒ€ ë¹„ìš© (ì›”, ì›)</label>
                  <input
                    id="carExtraMonthly"
                    type="number"
                    min="0"
                    step="100"
                    data-i18n-placeholder="placeholderExample"
                    placeholder="ì˜ˆ: 0"
                  />
                </div>
              </div>
            </div>
            <button class="toggle-btn" id="carExtraBtn" data-i18n="carExtraBtn">
              <span>â•</span> ì¶”ê°€ ë¹„ìš© ì…ë ¥í•˜ê¸°
            </button>
          </div>

          <!-- í˜¼í•© -->
          <div id="panel-mix" class="hidden" style="margin-top: 20px">
            <div class="sectionTitle" data-i18n="sectionMix">í˜¼í•© ì •ë³´ (ëŒ€ì¤‘êµí†µ + ìì°¨)</div>
            <div class="row">
              <div>
                <label data-i18n="labelMixPTOneWay">ëŒ€ì¤‘êµí†µ í¸ë„ (ì›)</label>
                <input
                  id="mixPtOneWay"
                  type="number"
                  min="0"
                  step="10"
                  data-i18n-placeholder="placeholderExample"
                  placeholder="ì˜ˆ: 1400"
                />
              </div>
              <div>
                <label data-i18n="labelMixPTExtra">ëŒ€ì¤‘êµí†µ ì¶”ê°€ (ì›”)</label>
                <input
                  id="mixPtExtraMonthly"
                  type="number"
                  min="0"
                  step="100"
                  data-i18n-placeholder="placeholderExample"
                  placeholder="ì˜ˆ: 0"
                />
              </div>
            </div>

            <div class="row" style="margin-top: 12px">
              <div>
                <label data-i18n="labelMixCarOneWayKm">ìì°¨ í¸ë„ ê±°ë¦¬ (km)</label>
                <input
                  id="mixCarOneWayKm"
                  type="number"
                  min="0"
                  step="0.1"
                  data-i18n-placeholder="placeholderExample"
                  placeholder="ì˜ˆ: 6.0"
                />
              </div>
              <div>
                <label data-i18n="labelMixCarKmpl">ìì°¨ ì—°ë¹„ (km/L)</label>
                <input
                  id="mixCarKmpl"
                  type="number"
                  min="0"
                  step="0.1"
                  data-i18n-placeholder="placeholderExample"
                  placeholder="ì˜ˆ: 11.0"
                />
              </div>
            </div>

            <div class="row" style="margin-top: 12px">
              <div>
                <label data-i18n="labelMixCarFuelPrice">ìœ ê°€ (ì›/L)</label>
                <input
                  id="mixCarFuelPrice"
                  type="number"
                  min="0"
                  step="1"
                  data-i18n-placeholder="placeholderExample"
                  placeholder="ì˜ˆ: 1700"
                />
              </div>
              <div>
                <label data-i18n="labelMixCarToll">í†¨ë¹„ (í•˜ë£¨, ì›)</label>
                <input
                  id="mixCarTollDaily"
                  type="number"
                  min="0"
                  step="10"
                  data-i18n-placeholder="placeholderExample"
                  placeholder="ì˜ˆ: 0"
                />
              </div>
            </div>

            <div class="toggle-content" id="mixExtraToggle">
              <div class="row" style="margin-top: 12px">
                <div>
                  <label data-i18n="labelMixCarParking">ì£¼ì°¨ë¹„ (ì›”, ì›)</label>
                  <input
                    id="mixCarParkingMonthly"
                    type="number"
                    min="0"
                    step="1000"
                    data-i18n-placeholder="placeholderExample"
                    placeholder="ì˜ˆ: 0"
                  />
                </div>
                <div>
                  <label data-i18n="labelMixExtra">ê¸°íƒ€ (ì›”, ì›)</label>
                  <input
                    id="mixExtraMonthly"
                    type="number"
                    min="0"
                    step="100"
                    data-i18n-placeholder="placeholderExample"
                    placeholder="ì˜ˆ: 0"
                  />
                </div>
              </div>
            </div>
            <button class="toggle-btn" id="mixExtraBtn" data-i18n="mixExtraBtn">
              <span>â•</span> ì¶”ê°€ ë¹„ìš© ì…ë ¥í•˜ê¸°
            </button>
          </div>

          <div class="split" style="margin-top: 20px">
            <button class="btn" id="resetBtn" type="button" data-i18n="resetBtn">ğŸ”„ ì´ˆê¸°í™”</button>
          </div>
        </div>

        <!-- ê²°ê³¼ ì¹´ë“œ -->
        <div class="card">
          <div class="sectionTitle" data-i18n="sectionCost">ğŸ’° ë¹„ìš© ê³„ì‚° ê²°ê³¼</div>
          <div class="resultBox">
            <div class="kpis">
              <div class="kpi">
                <div>
                  <div class="name">í•˜ë£¨ ì¶œí‡´ê·¼ ë¹„ìš©</div>
                  <div class="subVal" id="hintDaily">
                    ì…ë ¥í•˜ë©´ ìë™ ê³„ì‚°ë©ë‹ˆë‹¤
                  </div>
                </div>
                <div class="val" id="dailyCost">â€”</div>
              </div>
              <div class="kpi">
                <div>
                  <div class="name">ì›” ì¶œí‡´ê·¼ ë¹„ìš©</div>
                  <div class="subVal" id="hintMonthly">ì¶œê·¼ì¼ìˆ˜ ê¸°ì¤€</div>
                </div>
                <div class="val" id="monthlyCost">â€”</div>
              </div>
              <div class="kpi highlight">
                <div>
                  <div class="name">ì—°ê°„ ì¶œí‡´ê·¼ ë¹„ìš©</div>
                  <div class="subVal">ì›” ë¹„ìš© Ã— 12</div>
                </div>
                <div class="val highlight" id="yearlyCost">â€”</div>
              </div>
            </div>

            <div class="sectionTitle" style="margin-top: 24px" data-i18n="sectionTimeResult">
              â±ï¸ ì‹œê°„ ê³„ì‚° ê²°ê³¼
            </div>
            <div class="time-stats" id="timeStats">
              <div class="time-stat">
                <div class="number" id="dailyTime">â€”</div>
                <div class="label" data-i18n="labelDailyTime">í•˜ë£¨ ì†Œìš” ì‹œê°„</div>
              </div>
              <div class="time-stat">
                <div class="number" id="monthlyTime">â€”</div>
                <div class="label" data-i18n="labelMonthlyTime">ì›” ì†Œìš” ì‹œê°„</div>
                <div class="subVal" id="monthlyTimeDays" style="font-size: 11px; margin-top: 4px; opacity: 0.8;"></div>
              </div>
              <div class="time-stat">
                <div class="number" id="yearlyTime">â€”</div>
                <div class="label" data-i18n="labelYearlyTime">ì—°ê°„ ì†Œìš” ì‹œê°„</div>
                <div class="subVal" id="yearlyTimeDays" style="font-size: 11px; margin-top: 4px; opacity: 0.8;"></div>
              </div>
              <div class="time-stat">
                <div class="number" id="timeValue">â€”</div>
                <div class="label" data-i18n="labelTimeValue">ì‹œê°„ ê°€ì¹˜ (ì—°ê°„)</div>
              </div>
            </div>

            <div
              class="recommendations"
              id="recommendations"
              style="display: none"
            >
              <h3 data-i18n="recommendationsTitle">ğŸ’¡ ì´ ì‹œê°„ì— í•  ìˆ˜ ìˆëŠ” ê²ƒë“¤</h3>
              <div class="recommendation-list" id="recommendationList"></div>
            </div>

            <div class="copyArea">
              <button class="btn btn-primary" id="copyNumberBtn" type="button" data-i18n="copyNumber">
                ğŸ“‹ ìˆ«ìë§Œ ë³µì‚¬
              </button>
              <button
                class="btn btn-primary"
                id="copySentenceBtn"
                type="button"
                data-i18n="copySentence"
              >
                ğŸ“ ë¬¸ì¥ ë³µì‚¬
              </button>
            </div>

            <div class="note" id="summaryText">
              â€¢ ì…ë ¥ê°’ì´ ë¶€ì¡±í•˜ë©´ ì¼ë¶€ í•­ëª©ì€ 0ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.<br />
              â€¢ ê³„ì‚°ì€ "ì¶”ì •ì¹˜"ì´ë©° ì‹¤ì œ ë¹„ìš©ì€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="toast" id="toast">ë³µì‚¬ë¨</div>

    <script>
      // ---------- i18n ----------
      const translations = {
        ko: {
          metaTitle: "ì¶œí‡´ê·¼ ë¹„ìš© & ì‹œê°„ ê³„ì‚°ê¸°",
          metaDescription: "ì¶œí‡´ê·¼ ë¹„ìš©ê³¼ ì‹œê°„ì„ ê³„ì‚°í•˜ê³ , ì‹œê°„ í™œìš©ë²•ì„ ì¶”ì²œë°›ìœ¼ì„¸ìš”.",
          title: "â° ì¶œí‡´ê·¼ ë¹„ìš© & ì‹œê°„ ê³„ì‚°ê¸°",
          subtitle: "ì¶œí‡´ê·¼ ë¹„ìš©ê³¼ ì‹œê°„ì„ ê³„ì‚°í•˜ê³ , ì†Œì¤‘í•œ ì‹œê°„ì„ ì–´ë–»ê²Œ í™œìš©í• ì§€ ì¶”ì²œë°›ì•„ë³´ì„¸ìš”!",
          viewMore: "ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë³´ê¸°",
          labelDailyTime: "í•˜ë£¨ ì†Œìš” ì‹œê°„",
          labelMonthlyTime: "ì›” ì†Œìš” ì‹œê°„",
          labelYearlyTime: "ì—°ê°„ ì†Œìš” ì‹œê°„",
          labelTimeValue: "ì‹œê°„ ê°€ì¹˜ (ì—°ê°„)",
          recommendationsTitle: "ğŸ’¡ ì´ ì‹œê°„ì— í•  ìˆ˜ ìˆëŠ” ê²ƒë“¤",
          copyNumber: "ğŸ“‹ ìˆ«ìë§Œ ë³µì‚¬",
          copySentence: "ğŸ“ ë¬¸ì¥ ë³µì‚¬",
          toastCopied: "ë³µì‚¬ë¨",
          toastReset: "ì´ˆê¸°í™”ë¨",
          resetBtn: "ğŸ”„ ì´ˆê¸°í™”",
          sectionBasic: "ê¸°ë³¸ ì •ë³´",
          sectionTime: "ì¶œí‡´ê·¼ ì‹œê°„",
          sectionPT: "ëŒ€ì¤‘êµí†µ ì •ë³´",
          sectionCar: "ìì°¨ ì •ë³´",
          sectionMix: "í˜¼í•© ì •ë³´ (ëŒ€ì¤‘êµí†µ + ìì°¨)",
          sectionCost: "ğŸ’° ë¹„ìš© ê³„ì‚° ê²°ê³¼",
          sectionTimeResult: "â±ï¸ ì‹œê°„ ê³„ì‚° ê²°ê³¼",
          labelDays: "ì¶œê·¼ì¼ìˆ˜",
          labelRoundTrip: "ì™•ë³µ ê¸°ì¤€",
          labelCommuteTime: "í¸ë„ ì†Œìš” ì‹œê°„ (ë¶„)",
          labelHourlyValue: "ì‹œê°„ë‹¹ ê¸°íšŒë¹„ìš© (ì›)",
          labelPTOneWay: "í¸ë„ êµí†µë¹„ (ì›)",
          labelPTPass: "ì •ê¸°ê¶Œ ì‚¬ìš©",
          labelPTPassMonthly: "ì •ê¸°ê¶Œ ì›” ê¸ˆì•¡ (ì›)",
          labelPTExtra: "ì¶”ê°€ ë¹„ìš© (ì›”)",
          labelCarOneWayKm: "í¸ë„ ê±°ë¦¬ (km)",
          labelCarKmpl: "ì—°ë¹„ (km/L)",
          labelCarFuelPrice: "ìœ ê°€ (ì›/L)",
          labelCarTollDaily: "í†¨ê²Œì´íŠ¸ (í•˜ë£¨, ì›)",
          labelCarParking: "ì£¼ì°¨ë¹„ (ì›”, ì›)",
          labelCarExtra: "ê¸°íƒ€ ë¹„ìš© (ì›”, ì›)",
          labelMixPTOneWay: "ëŒ€ì¤‘êµí†µ í¸ë„ (ì›)",
          labelMixPTExtra: "ëŒ€ì¤‘êµí†µ ì¶”ê°€ (ì›”)",
          labelMixCarOneWayKm: "ìì°¨ í¸ë„ ê±°ë¦¬ (km)",
          labelMixCarKmpl: "ìì°¨ ì—°ë¹„ (km/L)",
          labelMixCarFuelPrice: "ìœ ê°€ (ì›/L)",
          labelMixCarToll: "í†¨ë¹„ (í•˜ë£¨, ì›)",
          labelMixCarParking: "ì£¼ì°¨ë¹„ (ì›”, ì›)",
          labelMixExtra: "ê¸°íƒ€ (ì›”, ì›)",
          daysCustom: "ì›” ì¶œê·¼ì¼ìˆ˜ ì§ì ‘ ì…ë ¥",
          daysCustomBtn: "ğŸ“ ì§ì ‘ ì…ë ¥í•˜ê¸°",
          ptPassBtn: "ğŸ’³ ì •ê¸°ê¶Œ ì •ë³´ ì…ë ¥í•˜ê¸°",
          carExtraBtn: "â• ì¶”ê°€ ë¹„ìš© ì…ë ¥í•˜ê¸°",
          mixExtraBtn: "â• ì¶”ê°€ ë¹„ìš© ì…ë ¥í•˜ê¸°",
          tabPT: "ğŸš‡ ëŒ€ì¤‘êµí†µ",
          tabCar: "ğŸš— ìì°¨",
          tabMix: "ğŸ”€ í˜¼í•©",
          optionRoundTrip: "ì™•ë³µ",
          optionOneWay: "í¸ë„",
          optionDays5: "ì£¼ 5ì¼ (ì›” 22ì¼)",
          optionDays4: "ì£¼ 4ì¼ (ì›” 18ì¼)",
          optionDays3: "ì£¼ 3ì¼ (ì›” 14ì¼)",
          optionCustom: "ì§ì ‘ ì…ë ¥",
          optionPTPassNo: "ë¯¸ì‚¬ìš©",
          optionPTPassYes: "ì‚¬ìš©",
          kpiDailyCost: "í•˜ë£¨ ì¶œí‡´ê·¼ ë¹„ìš©",
          kpiMonthlyCost: "ì›” ì¶œí‡´ê·¼ ë¹„ìš©",
          kpiYearlyCost: "ì—°ê°„ ì¶œí‡´ê·¼ ë¹„ìš©",
          hintDaily: "ì…ë ¥í•˜ë©´ ìë™ ê³„ì‚°ë©ë‹ˆë‹¤",
          hintMonthly: "ì¶œê·¼ì¼ìˆ˜ ê¸°ì¤€",
          hintYearly: "ì›” ë¹„ìš© Ã— 12",
          hintPTPass: "ì •ê¸°ê¶Œì„ ì“°ë©´ ì›” ê¸ˆì•¡ì´ ìš°ì„  ì ìš©ë©ë‹ˆë‹¤",
          hintPTExtra: "ë²„ìŠ¤ ì¶”ê°€ìš”ê¸ˆ, ì…”í‹€ ìœ ë£Œ ë“±",
          hintCommuteTime: "ì§‘ì—ì„œ íšŒì‚¬ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„",
          hintHourlyValue: "ì‹œê°„ë‹¹ ê¸‰ì—¬ ë˜ëŠ” ê°€ì¹˜ë¡œ ê³„ì‚°",
          placeholderExample: "ì˜ˆ: {value}",
          noteSummary: "â€¢ ì…ë ¥ê°’ì´ ë¶€ì¡±í•˜ë©´ ì¼ë¶€ í•­ëª©ì€ 0ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.<br />â€¢ ê³„ì‚°ì€ \"ì¶”ì •ì¹˜\"ì´ë©° ì‹¤ì œ ë¹„ìš©ì€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
        },
        en: {
          metaTitle: "Commute Cost & Time Calculator",
          metaDescription: "Calculate commute costs and time, get activity recommendations.",
          title: "â° Commute Cost & Time Calculator",
          subtitle: "Calculate your commute costs and time, and discover how to make the most of your valuable time!",
          viewMore: "View Other Services",
          labelDailyTime: "Daily Time",
          labelMonthlyTime: "Monthly Time",
          labelYearlyTime: "Yearly Time",
          labelTimeValue: "Time Value (Yearly)",
          recommendationsTitle: "ğŸ’¡ Things You Can Do During This Time",
          copyNumber: "ğŸ“‹ Copy Numbers Only",
          copySentence: "ğŸ“ Copy Sentence",
          toastCopied: "Copied",
          toastReset: "Reset",
          resetBtn: "ğŸ”„ Reset",
          sectionBasic: "Basic Information",
          sectionTime: "Commute Time",
          sectionPT: "Public Transportation",
          sectionCar: "Car Information",
          sectionMix: "Mixed (Public Transport + Car)",
          sectionCost: "ğŸ’° Cost Calculation Results",
          sectionTimeResult: "â±ï¸ Time Calculation Results",
          labelDays: "Work Days",
          labelRoundTrip: "Round Trip",
          labelCommuteTime: "One-way Time (minutes)",
          labelHourlyValue: "Hourly Opportunity Cost (KRW)",
          labelPTOneWay: "One-way Fare (KRW)",
          labelPTPass: "Pass Usage",
          labelPTPassMonthly: "Monthly Pass Amount (KRW)",
          labelPTExtra: "Additional Costs (Monthly)",
          labelCarOneWayKm: "One-way Distance (km)",
          labelCarKmpl: "Fuel Efficiency (km/L)",
          labelCarFuelPrice: "Fuel Price (KRW/L)",
          labelCarTollDaily: "Toll (Daily, KRW)",
          labelCarParking: "Parking Fee (Monthly, KRW)",
          labelCarExtra: "Other Costs (Monthly, KRW)",
          labelMixPTOneWay: "PT One-way (KRW)",
          labelMixPTExtra: "PT Additional (Monthly)",
          labelMixCarOneWayKm: "Car One-way Distance (km)",
          labelMixCarKmpl: "Car Fuel Efficiency (km/L)",
          labelMixCarFuelPrice: "Fuel Price (KRW/L)",
          labelMixCarToll: "Toll (Daily, KRW)",
          labelMixCarParking: "Parking Fee (Monthly, KRW)",
          labelMixExtra: "Other (Monthly, KRW)",
          daysCustom: "Custom Work Days per Month",
          daysCustomBtn: "ğŸ“ Enter Custom",
          ptPassBtn: "ğŸ’³ Enter Pass Info",
          carExtraBtn: "â• Enter Additional Costs",
          mixExtraBtn: "â• Enter Additional Costs",
          tabPT: "ğŸš‡ Public Transport",
          tabCar: "ğŸš— Car",
          tabMix: "ğŸ”€ Mixed",
          optionRoundTrip: "Round Trip",
          optionOneWay: "One-way",
          optionDays5: "5 days/week (22 days/month)",
          optionDays4: "4 days/week (18 days/month)",
          optionDays3: "3 days/week (14 days/month)",
          optionCustom: "Custom",
          optionPTPassNo: "Not Used",
          optionPTPassYes: "Used",
          kpiDailyCost: "Daily Commute Cost",
          kpiMonthlyCost: "Monthly Commute Cost",
          kpiYearlyCost: "Yearly Commute Cost",
          hintDaily: "Will be calculated automatically",
          hintMonthly: "Based on work days",
          hintYearly: "Monthly cost Ã— 12",
          hintPTPass: "Monthly pass amount takes priority",
          hintPTExtra: "Additional bus fare, paid shuttle, etc.",
          hintCommuteTime: "Time from home to office",
          hintHourlyValue: "Calculate based on hourly wage or value",
          placeholderExample: "e.g.: {value}",
          noteSummary: "â€¢ Some items will be 0 if input is insufficient.<br />â€¢ Calculations are \"estimates\" and actual costs may vary."
        }
      };

      const defaultLang = "ko";
      const supportedLangs = ["ko", "en"];
      let currentLang = defaultLang;

      function t(key, vars = {}) {
        const langTable = translations[currentLang] || translations.ko;
        const template = langTable?.[key] ?? translations.ko?.[key] ?? key;
        if (typeof template !== "string") return template;
        return template.replace(/\{(\w+)\}/g, (_, token) =>
          vars[token] !== undefined ? vars[token] : `{${token}}`
        );
      }

      function applyTranslations() {
        document.title = t("metaTitle");
        const desc = document.querySelector('meta[name="description"]');
        if (desc) desc.setAttribute("content", t("metaDescription"));
        document.documentElement.lang = currentLang;
        document.querySelectorAll("[data-i18n]").forEach((el) => {
          el.textContent = t(el.dataset.i18n);
        });
        document.querySelectorAll("[data-i18n-html]").forEach((el) => {
          el.innerHTML = t(el.dataset.i18nHtml);
        });
        document.querySelectorAll("[data-i18n-content]").forEach((el) => {
          el.setAttribute("content", t(el.dataset.i18nContent));
        });
        document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
          const key = el.dataset.i18nPlaceholder;
          const placeholder = t(key);
          // If placeholder contains {value}, try to extract original value
          if (placeholder.includes("{value}")) {
            const originalPlaceholder = el.getAttribute("data-placeholder-original") || el.placeholder || "";
            const match = originalPlaceholder.match(/(\d+(?:\.\d+)?)/);
            if (match) {
              el.setAttribute("placeholder", placeholder.replace("{value}", match[1]));
            } else {
              el.setAttribute("placeholder", placeholder.replace("{value}", ""));
            }
          } else {
            el.setAttribute("placeholder", placeholder);
          }
        });
        document.querySelectorAll("[data-i18n-label]").forEach((el) => {
          const label = el.closest("div")?.querySelector("label");
          if (label) label.textContent = t(el.dataset.i18nLabel);
        });
        
        // Update select options
        const daysPreset = $("daysPreset");
        if (daysPreset) {
          Array.from(daysPreset.options).forEach((opt) => {
            if (opt.value === "22") opt.textContent = t("optionDays5");
            else if (opt.value === "18") opt.textContent = t("optionDays4");
            else if (opt.value === "14") opt.textContent = t("optionDays3");
            else if (opt.value === "custom") opt.textContent = t("optionCustom");
          });
        }
        const roundTrip = $("roundTrip");
        if (roundTrip) {
          Array.from(roundTrip.options).forEach((opt) => {
            if (opt.value === "2") opt.textContent = t("optionRoundTrip");
            else if (opt.value === "1") opt.textContent = t("optionOneWay");
          });
        }
        const ptPass = $("ptPass");
        if (ptPass) {
          Array.from(ptPass.options).forEach((opt) => {
            if (opt.value === "no") opt.textContent = t("optionPTPassNo");
            else if (opt.value === "yes") opt.textContent = t("optionPTPassYes");
          });
        }
      }

      function setLang(lang, options = {}) {
        const nextLang = translations[lang] ? lang : defaultLang;
        currentLang = nextLang;
        document.documentElement.lang = nextLang;
        localStorage.setItem("preferredLang", nextLang);
        document.querySelectorAll(".lang-switch button").forEach((button) => {
          button.classList.toggle("active", button.dataset.lang === nextLang);
        });
        applyTranslations();
        compute();
        if (options.updateUrl) {
          const url = new URL(window.location.href);
          url.searchParams.set("lang", nextLang);
          window.history.replaceState({}, "", url);
        }
      }

      function detectLang() {
        const params = new URLSearchParams(window.location.search);
        const paramLang = params.get("lang");
        if (supportedLangs.includes(paramLang)) return paramLang;
        const stored = localStorage.getItem("preferredLang");
        if (supportedLangs.includes(stored)) return stored;
        const browserLang = navigator.language || navigator.userLanguage;
        if (browserLang && browserLang.toLowerCase().startsWith("ko")) return "ko";
        return defaultLang;
      }

      // ---------- Utilities ----------
      const $ = (id) => document.getElementById(id);
      const fmt = (n) => {
        if (!isFinite(n)) return "â€”";
        const x = Math.max(0, Math.round(n));
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + "ì›";
      };
      const fmtTime = (minutes) => {
        if (!isFinite(minutes) || minutes === 0) return "â€”";
        const hours = Math.floor(minutes / 60);
        const mins = Math.round(minutes % 60);
        if (hours === 0) return `${mins}ë¶„`;
        if (mins === 0) return `${hours}ì‹œê°„`;
        return `${hours}ì‹œê°„ ${mins}ë¶„`;
      };
      const fmtTimeShort = (minutes) => {
        if (!isFinite(minutes) || minutes === 0) return "â€”";
        const hours = Math.floor(minutes / 60);
        const mins = Math.round(minutes % 60);
        if (hours === 0) return `${mins}ë¶„`;
        return `${hours}ì‹œê°„`;
      };
      const fmtDays = (minutes) => {
        if (!isFinite(minutes) || minutes === 0) return "";
        const days = Math.floor(minutes / (24 * 60));
        const hours = Math.floor((minutes % (24 * 60)) / 60);
        if (days === 0) return "";
        if (hours === 0) {
          return currentLang === "en" ? `â‰ˆ ${days} days` : `â‰ˆ ${days}ì¼`;
        }
        return currentLang === "en" ? `â‰ˆ ${days} days ${hours}h` : `â‰ˆ ${days}ì¼ ${hours}ì‹œê°„`;
      };
      const toNum = (v) => {
        const n = Number(v);
        return isFinite(n) ? n : 0;
      };
      const showToast = (msg = "ë³µì‚¬ë¨") => {
        const t = $("toast");
        t.textContent = msg;
        t.classList.add("show");
        setTimeout(() => t.classList.remove("show"), 2000);
      };
      const copyText = async (text) => {
        try {
          await navigator.clipboard.writeText(text);
          showToast("ë³µì‚¬ë¨");
        } catch (e) {
          const ta = document.createElement("textarea");
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          showToast("ë³µì‚¬ë¨");
        }
      };

      // ---------- Toggle Logic ----------
      function setupToggle(btnId, contentId) {
        const btn = $(btnId);
        const content = $(contentId);
        if (!btn || !content) return;

        btn.addEventListener("click", () => {
          const isShowing = content.classList.contains("show");
          if (isShowing) {
            content.classList.remove("show");
            btn.classList.remove("active");
          } else {
            content.classList.add("show");
            btn.classList.add("active");
          }
        });
      }

      // ---------- State ----------
      let mode = "pt";

      // ---------- Mode Tabs ----------
      const tabs = document.querySelectorAll(".tab");
      tabs.forEach((btn) => {
        btn.addEventListener("click", () => {
          tabs.forEach((x) => x.classList.remove("active"));
          btn.classList.add("active");
          mode = btn.dataset.mode;

          $("panel-pt").classList.toggle("hidden", mode !== "pt");
          $("panel-car").classList.toggle("hidden", mode !== "car");
          $("panel-mix").classList.toggle("hidden", mode !== "mix");

          compute();
        });
      });

      // ---------- Days preset logic ----------
      $("daysPreset").addEventListener("change", () => {
        const v = $("daysPreset").value;
        const btn = $("daysCustomBtn");
        const content = $("daysCustomToggle");
        if (v === "custom") {
          btn.style.display = "inline-flex";
          content.classList.add("show");
          btn.classList.add("active");
        } else {
          btn.style.display = "none";
          content.classList.remove("show");
          btn.classList.remove("active");
          $("daysCustom").value = "";
        }
        compute();
      });
      setupToggle("daysCustomBtn", "daysCustomToggle");
      $("daysCustom").addEventListener("input", compute);

      // ---------- PT pass logic ----------
      $("ptPass").addEventListener("change", () => {
        const isYes = $("ptPass").value === "yes";
        const btn = $("ptPassBtn");
        const content = $("ptPassToggle");
        if (isYes) {
          btn.style.display = "inline-flex";
          content.classList.add("show");
          btn.classList.add("active");
        } else {
          btn.style.display = "none";
          content.classList.remove("show");
          btn.classList.remove("active");
          $("ptPassMonthly").value = "";
        }
        compute();
      });
      setupToggle("ptPassBtn", "ptPassToggle");
      setupToggle("carExtraBtn", "carExtraToggle");
      setupToggle("mixExtraBtn", "mixExtraToggle");

      // ---------- Inputs -> recompute ----------
      const allInputs = document.querySelectorAll("input, select");
      allInputs.forEach((el) => {
        el.addEventListener("input", compute);
        el.addEventListener("change", compute);
      });

      // ---------- Reset ----------
      $("resetBtn").addEventListener("click", () => {
        $("daysPreset").value = "22";
        $("daysCustom").value = "";
        $("daysCustomToggle").classList.remove("show");
        $("daysCustomBtn").style.display = "none";
        $("daysCustomBtn").classList.remove("active");
        $("roundTrip").value = "2";
        $("commuteTime").value = "";
        $("hourlyValue").value = "";

        // PT
        $("ptOneWay").value = "";
        $("ptPass").value = "no";
        $("ptPassMonthly").value = "";
        $("ptPassToggle").classList.remove("show");
        $("ptPassBtn").style.display = "none";
        $("ptPassBtn").classList.remove("active");
        $("ptExtraMonthly").value = "";

        // Car
        $("carOneWayKm").value = "";
        $("carKmpl").value = "";
        $("carFuelPrice").value = "";
        $("carTollDaily").value = "";
        $("carParkingMonthly").value = "";
        $("carExtraMonthly").value = "";
        $("carExtraToggle").classList.remove("show");
        $("carExtraBtn").classList.remove("active");

        // Mix
        $("mixPtOneWay").value = "";
        $("mixPtExtraMonthly").value = "";
        $("mixCarOneWayKm").value = "";
        $("mixCarKmpl").value = "";
        $("mixCarFuelPrice").value = "";
        $("mixCarTollDaily").value = "";
        $("mixCarParkingMonthly").value = "";
        $("mixExtraMonthly").value = "";
        $("mixExtraToggle").classList.remove("show");
        $("mixExtraBtn").classList.remove("active");

        compute();
        showToast(t("toastReset"));
      });

      // ---------- Recommendations ----------
      const recommendations = {
        ko: [
          {
            emoji: "ğŸ“š",
            title: "ì˜¤ë””ì˜¤ë¶ ë“£ê¸°",
            desc: "1ë…„ì— ì±… 20~30ê¶Œì„ ì½ì„ ìˆ˜ ìˆì–´ìš”!",
          },
          {
            emoji: "ğŸ§",
            title: "íŒŸìºìŠ¤íŠ¸ ì²­ì·¨",
            desc: "ì§€ì‹ê³¼ ì¬ë¯¸ë¥¼ ë™ì‹œì— ì±™ê¸°ì„¸ìš”",
          },
          {
            emoji: "ğŸ“±",
            title: "ì˜¨ë¼ì¸ ê°•ì˜ ìˆ˜ê°•",
            desc: "ìƒˆë¡œìš´ ìŠ¤í‚¬ì„ ë°°ìš¸ ìˆ˜ ìˆëŠ” ì‹œê°„",
          },
          { emoji: "ğŸ’­", title: "ëª…ìƒí•˜ê¸°", desc: "í•˜ë£¨ì˜ ì‹œì‘ê³¼ ëì„ ì°¨ë¶„í•˜ê²Œ" },
          { emoji: "âœï¸", title: "ì¼ê¸° ì“°ê¸°", desc: "í•˜ë£¨ë¥¼ ëŒì•„ë³´ê³  ê¸°ë¡í•˜ì„¸ìš”" },
          {
            emoji: "ğŸµ",
            title: "ìŒì•… ê°ìƒ",
            desc: "ì¢‹ì•„í•˜ëŠ” ìŒì•…ìœ¼ë¡œ ê¸°ë¶„ ì „í™˜",
          },
          { emoji: "ğŸ“–", title: "ì „ìì±… ì½ê¸°", desc: "ë…ì„œ ìŠµê´€ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”" },
          { emoji: "ğŸ§˜", title: "ìŠ¤íŠ¸ë ˆì¹­", desc: "ëª¸ê³¼ ë§ˆìŒì„ í’€ì–´ì£¼ëŠ” ì‹œê°„" },
          {
            emoji: "ğŸ’¬",
            title: "ê°€ì¡±/ì¹œêµ¬ì™€ í†µí™”",
            desc: "ì†Œì¤‘í•œ ì‚¬ëŒë“¤ê³¼ ëŒ€í™”í•˜ê¸°",
          },
          {
            emoji: "ğŸ¯",
            title: "ëª©í‘œ ê³„íš ì„¸ìš°ê¸°",
            desc: "í•˜ë£¨ ê³„íšì„ ì„¸ìš°ê³  ì •ë¦¬",
          },
        ],
        en: [
          {
            emoji: "ğŸ“š",
            title: "Listen to Audiobooks",
            desc: "You can read 20-30 books a year!",
          },
          {
            emoji: "ğŸ§",
            title: "Listen to Podcasts",
            desc: "Gain knowledge and entertainment at the same time",
          },
          {
            emoji: "ğŸ“±",
            title: "Take Online Courses",
            desc: "Time to learn new skills",
          },
          { emoji: "ğŸ’­", title: "Meditate", desc: "Start and end your day calmly" },
          { emoji: "âœï¸", title: "Write a Journal", desc: "Reflect on your day and record it" },
          {
            emoji: "ğŸµ",
            title: "Listen to Music",
            desc: "Change your mood with your favorite music",
          },
          { emoji: "ğŸ“–", title: "Read E-books", desc: "Build a reading habit" },
          { emoji: "ğŸ§˜", title: "Stretch", desc: "Time to relax your body and mind" },
          {
            emoji: "ğŸ’¬",
            title: "Call Family/Friends",
            desc: "Talk with your loved ones",
          },
          {
            emoji: "ğŸ¯",
            title: "Plan Your Goals",
            desc: "Set and organize your daily plans",
          },
        ]
      };

      function getRecommendations(yearlyMinutes) {
        if (!yearlyMinutes || yearlyMinutes < 60) return [];

        // ì‹œê°„ì— ë”°ë¼ ì¶”ì²œ ê°œìˆ˜ ì¡°ì •
        const count = yearlyMinutes > 10000 ? 6 : yearlyMinutes > 5000 ? 4 : 3;
        const recs = recommendations[currentLang] || recommendations.ko;
        const shuffled = [...recs].sort(() => Math.random() - 0.5);
        return shuffled.slice(0, count);
      }

      function renderRecommendations(yearlyMinutes) {
        const container = $("recommendations");
        const list = $("recommendationList");

        if (!yearlyMinutes || yearlyMinutes < 60) {
          container.style.display = "none";
          return;
        }

        const recs = getRecommendations(yearlyMinutes);
        list.innerHTML = recs
          .map(
            (r) => `
          <div class="recommendation-item">
            <div class="title">${r.emoji} ${r.title}</div>
            <div class="desc">${r.desc}</div>
          </div>
        `
          )
          .join("");
        container.style.display = "block";
      }

      // ---------- Compute ----------
      function getDaysInMonth() {
        const preset = $("daysPreset").value;
        if (preset === "custom") {
          const d = toNum($("daysCustom").value);
          return Math.max(0, Math.round(d));
        }
        return toNum(preset);
      }

      function computePT(days, rt) {
        const pass = $("ptPass").value === "yes";
        const extraMonthly = toNum($("ptExtraMonthly").value);

        if (pass) {
          const passMonthly = toNum($("ptPassMonthly").value);
          const monthly = passMonthly + extraMonthly;
          const daily = days > 0 ? monthly / days : 0;
          return { daily, monthly };
        } else {
          const oneWay = toNum($("ptOneWay").value);
          const daily = oneWay * rt;
          const monthly = daily * days + extraMonthly;
          return { daily, monthly };
        }
      }

      function computeCar(days, rt, prefix = "car") {
        const oneWayKm = toNum($(prefix + "OneWayKm").value);
        const kmpl = toNum($(prefix + "Kmpl").value);
        const fuelPrice = toNum($(prefix + "FuelPrice").value);
        const tollDaily = toNum($(prefix + "TollDaily").value);

        const parkingMonthly =
          prefix === "car"
            ? toNum($("carParkingMonthly").value)
            : toNum($("mixCarParkingMonthly").value);
        const extraMonthly =
          prefix === "car"
            ? toNum($("carExtraMonthly").value)
            : toNum($("mixExtraMonthly").value);

        const dailyKm = oneWayKm * rt;
        let fuelDaily = 0;
        if (dailyKm > 0 && kmpl > 0 && fuelPrice > 0) {
          fuelDaily = (dailyKm / kmpl) * fuelPrice;
        }
        const daily = fuelDaily + tollDaily;
        const monthly = daily * days + parkingMonthly + extraMonthly;
        return { daily, monthly };
      }

      function computeMix(days, rt) {
        const ptOneWay = toNum($("mixPtOneWay").value);
        const ptDaily = ptOneWay * rt;
        const ptMonthly = ptDaily * days + toNum($("mixPtExtraMonthly").value);

        const carPart = computeCar(days, rt, "mixCar");
        const monthly = ptMonthly + carPart.monthly;
        const daily = ptDaily + carPart.daily;

        return { daily, monthly };
      }

      function compute() {
        const days = getDaysInMonth();
        const rt = toNum($("roundTrip").value);
        const commuteTime = toNum($("commuteTime").value);
        const hourlyValue = toNum($("hourlyValue").value);

        let daily = 0,
          monthly = 0;

        if (mode === "pt") {
          const r = computePT(days, rt);
          daily = r.daily;
          monthly = r.monthly;
        } else if (mode === "car") {
          const r = computeCar(days, rt, "car");
          daily = r.daily;
          monthly = r.monthly;
        } else {
          const r = computeMix(days, rt);
          daily = r.daily;
          monthly = r.monthly;
        }

        const yearly = monthly * 12;

        // ì‹œê°„ ê³„ì‚°
        const dailyMinutes = commuteTime * rt;
        const monthlyMinutes = dailyMinutes * days;
        const yearlyMinutes = monthlyMinutes * 12;
        const yearlyHours = yearlyMinutes / 60;
        const timeValue = yearlyHours * hourlyValue;

        // ê²°ê³¼ í‘œì‹œ
        $("dailyCost").textContent = fmt(daily);
        $("monthlyCost").textContent = fmt(monthly);
        $("yearlyCost").textContent = fmt(yearly);

        $("dailyTime").textContent = fmtTimeShort(dailyMinutes);
        $("monthlyTime").textContent = fmtTimeShort(monthlyMinutes);
        $("monthlyTimeDays").textContent = fmtDays(monthlyMinutes);
        $("yearlyTime").textContent = fmtTimeShort(yearlyMinutes);
        $("yearlyTimeDays").textContent = fmtDays(yearlyMinutes);
        $("timeValue").textContent = fmt(timeValue);

        // íŒíŠ¸ í…ìŠ¤íŠ¸
        $("hintDaily").textContent =
          days > 0
            ? `ì›” ${days}ì¼ ê¸°ì¤€ (ì™•ë³µ ${rt === 2 ? "í¬í•¨" : "ë¯¸í¬í•¨"})`
            : "ì¶œê·¼ì¼ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.";

        $("hintMonthly").textContent =
          mode === "pt" && $("ptPass").value === "yes"
            ? "ì •ê¸°ê¶Œ ì›” ê¸ˆì•¡ ìš°ì„  ì ìš©"
            : "ì…ë ¥ê°’ ê¸°ë°˜ ì¶”ì •ì¹˜";

        // ì¶”ì²œ í‘œì‹œ
        renderRecommendations(yearlyMinutes);

        // ìš”ì•½ ë¬¸ì¥
        const modeLabel =
          currentLang === "en"
            ? mode === "pt" ? "Public Transport" : mode === "car" ? "Car" : "Mixed"
            : mode === "pt" ? "ëŒ€ì¤‘êµí†µ" : mode === "car" ? "ìì°¨" : "í˜¼í•©";
        const timeText =
          yearlyMinutes > 0
            ? currentLang === "en"
              ? ` Yearly ${fmtTimeShort(yearlyMinutes)}, time value ${fmt(timeValue)}.`
              : ` ì—°ê°„ ${fmtTimeShort(yearlyMinutes)} ì†Œìš”, ì‹œê°„ ê°€ì¹˜ ${fmt(timeValue)}.`
            : "";
        const sentence =
          currentLang === "en"
            ? `(${modeLabel}) Commute cost is about ${fmt(daily).replace("ì›", " KRW")} per day / ` +
              `about ${fmt(monthly).replace("ì›", " KRW")} per month / ` +
              `about ${fmt(yearly).replace("ì›", " KRW")} per year.${timeText}`
            : `(${modeLabel}) ì¶œí‡´ê·¼ ë¹„ìš©ì€ í•˜ë£¨ ì•½ ${fmt(daily).replace("ì›", "ì›")} / ` +
              `í•œ ë‹¬ ì•½ ${fmt(monthly).replace("ì›", "ì›")} / ` +
              `1ë…„ ì•½ ${fmt(yearly).replace("ì›", "ì›")} ì…ë‹ˆë‹¤.${timeText}`;

        $("summaryText").dataset.sentence = sentence;
        $("summaryText").dataset.number = Math.round(monthly);
      }

      // ---------- Copy buttons ----------
      $("copyNumberBtn").addEventListener("click", () => {
        const n = $("summaryText").dataset.number || "0";
        copyText(String(n));
      });
      $("copySentenceBtn").addEventListener("click", () => {
        const s = $("summaryText").dataset.sentence || "";
        copyText(s);
      });

      // ---------- Language Switch ----------
      document.querySelectorAll(".lang-switch button").forEach((button) => {
        button.addEventListener("click", () => {
          setLang(button.dataset.lang, { updateUrl: true });
        });
      });

      // ì´ˆê¸°í™”
      setLang(detectLang(), { updateUrl: false });
      compute();
    </script>
  </body>
</html>
